<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prevenção de Cancro de Pele</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body class="bg-light">
    <div class="container d-flex flex-column align-items-center min-vh-100">
        <h1 class="my-4 text-primary" style="font-size: 2.5rem;">Prevenção de Cancro de Pele</h1>
        <h3 id="location-label" class="text-secondary mb-3" style="font-size: 1.5rem;">A detetar a sua localização...</h3>
        
        
        <p id="instruction-label" class="text-primary mb-3" style="font-size: 1.5rem;">Carregue ou capture uma foto da sua mão</p>
        
        
        <div class="container-botoes">
            <input type="file" id="photo-upload" class="btn btn-primary  mb-3" accept=".jpg,.png" style="font-size: 1.25rem; max-width: 400px;">
            <button id="upload-button" class="btn btn-primary mb-3" style="font-size: 1.25rem; padding: 10px 20px;">Carregar Foto</button>
        </div>
        
        <p></p>

        <div class="container-botoes">
            <button id="camera-button" class="btn btn-primary2 mb-3" style="font-size: 1.25rem; padding: 10px 20px;">Capturar imagem</button>
        </div>

        <p></p>

        <div class="container-botoes">
            <button id="analyze-button" class="btn btn-success mb-3" style="font-size: 1.25rem; padding: 10px 20px;" disabled>Analisar e Obter Dicas</button>
            <div id="spinner" class="spinner-border text-primary d-none" role="status" style="width: 2.5rem; height: 2.5rem;">
                <span class="visually-hidden">A analisar...</span>
            </div>

            <!-- resultado -->
            <div id="result-card" class="card-result shadow-sm mb-3" style="max-width: 400px;">
                <p id="result-label" style="font-size: 1.25rem;">Os resultados aparecerão aqui.</p>
            </div>
        </div>

        <p></p>

        <p id="status-label" class="text-secondary" style="font-size: 1rem italic;">{{ status_message }}</p>

        <!-- NOVA SEÇÃO: Gestão de Dados das Análises -->
        <div class="data-section">
            <h3>📊 Gestão de Dados das Análises</h3>
            
            <div class="data-controls">
                <button onclick="viewData()" class="btn-secondary" id="view-data-btn">
                    👁️ Ver Dados
                </button>
                <button onclick="exportData()" class="btn-secondary" id="export-data-btn">
                    📥 Exportar CSV
                </button>
                <button onclick="clearDataView()" class="btn-secondary" id="clear-data-btn">
                    🗑️ Limpar Vista
                </button>
            </div>
            
            <div id="data-view" style="display: none;">
                <div id="data-content"></div>
            </div>
            
            <div id="data-message"></div>
        </div>

    </div>

    <!-- Call scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>   
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/static/js/scripts.js"></script>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/static/js/service-worker.js");
        }
    </script>
</body>
</html>